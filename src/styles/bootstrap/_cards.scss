.card {
  margin-top: .5rem;
  margin-bottom: .5rem;
  --bs-card-box-shadow: #{$box-shadow-sm};

  .card-header:last-child {
    border-bottom: 0;
    border-radius: $card-inner-border-radius;
  }

  &:first-child {
    margin-top: 0;
  }

  &:last-child {
    margin-bottom: 0;
  }
}

$primary-border: shade-color($primary, 20%);
$primary-border-dark: tint-color($primary, 15%);

$mech-team-bg-dark: mix($dark, $body-bg, 80%);
$mech-team-group-bg: mix($dark-bg-subtle, $body-bg, 50%);

.card-mech-team {
  --bs-card-border-color: #000;
  --bs-card-bg: #{mix($dark, $body-bg, 30%)};

  > .card-header {
    --bs-card-cap-bg: #{$dark};
    --bs-card-cap-color: #{$body-color-dark};
  }
}

@include color-mode(dark) {
  .card-mech-team {
    --bs-card-bg: #{$mech-team-bg-dark};
  }
}

.card-mech-team-group {
  --bs-card-bg: #{$mech-team-group-bg};
  --bs-card-border-color: #{$primary-border};
}

.card-mech-team,
.card-mech-team-group {
  > .card-header {
    border: 0;

    &.card-header-collapsing {
      transition: border-radius .35s ease;
    }

    &.card-header-collapsed {
      border-radius: var(--bs-card-inner-border-radius);
    }
  }

  > .card-body {
    border-top: var(--bs-card-border-width) solid var(--bs-card-border-color);
  }
}

@include color-mode(dark) {
  .card-mech-team-group {
    --bs-card-bg: #{mix($mech-team-bg-dark, $body-bg-dark, 50%)};
    --bs-card-border-color: #{$primary-border-dark};
  }
}

.card-dark-border {
  --bs-card-border-color: #{$primary-border};
}

@include color-mode(dark) {
  .card-dark-border {
    --bs-card-border-color: #{$primary-border-dark};
  }
}

.card-mech {
  .card-body {
    padding: $card-spacer-y * 0.5 $card-spacer-x * 0.5;
    border: 0;
  }
}

.card-army-list {

  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-top: 0;

  .form-floating {
    box-shadow: $box-shadow-sm;
    border-radius: var(--bs-border-radius);

    .form-control,
    .form-select {
      --bs-border-color: var(--bs-border-color-translucent);
    }
  }
}

.card-faction-perk {
  .card-body {
    font-size: 0.8rem;
    --bs-body-font-size: 0.5rem;
  }
}

.cards-drop-preview {
  background: rgba(0, 0, 0, 0.1);
  border-radius: var(--bs-border-radius);
}

@include color-mode(dark) {
  .cards-drop-preview {
    background: rgba(255, 255, 255, 0.1);
  }
}